<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vms="using:EVEMon.Common.ViewModels.Settings"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="600"
        x:Class="EVEMon.Avalonia.Views.Settings.SettingsWindow"
        x:DataType="vms:SettingsViewModel"
        Title="EVEMon Settings"
        Width="500" Height="600"
        MinWidth="400" MinHeight="400"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource EVEMonPrimaryBrush}">

    <Grid RowDefinitions="*,Auto">
        <!-- Settings Content -->
        <ScrollViewer Grid.Row="0" Padding="16">
            <StackPanel Spacing="16">

                <!-- General Settings -->
                <Border Background="{StaticResource EVEMonSecondaryBrush}"
                        CornerRadius="4"
                        Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="General"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <CheckBox Content="Safe for Work mode (removes images)"
                                  IsChecked="{Binding SafeForWork}"
                                  Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <CheckBox Content="Run EVEMon at system startup"
                                  IsChecked="{Binding RunAtStartup}"
                                  Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <Grid ColumnDefinitions="Auto,*,Auto" Margin="0,8,0,0">
                            <TextBlock Grid.Column="0"
                                       Text="Skill queue warning threshold:"
                                       VerticalAlignment="Center"
                                       Foreground="{StaticResource EVEMonTextPrimaryBrush}" />
                            <NumericUpDown Grid.Column="2"
                                           Value="{Binding SkillQueueWarningThresholdDays}"
                                           Minimum="1"
                                           Maximum="365"
                                           Width="80"
                                           FormatString="0"
                                           Margin="8,0,0,0" />
                        </Grid>
                        <TextBlock Text="Show warning when queue has less than this many days"
                                   FontSize="11"
                                   Foreground="{StaticResource EVEMonTextMutedColor}"
                                   Margin="0,-8,0,0" />
                    </StackPanel>
                </Border>

                <!-- System Tray Settings -->
                <Border Background="{StaticResource EVEMonSecondaryBrush}"
                        CornerRadius="4"
                        Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="System Tray"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <CheckBox Content="Show system tray icon"
                                  IsChecked="{Binding ShowTrayIcon}"
                                  Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <CheckBox Content="Minimize to system tray"
                                  IsChecked="{Binding MinimizeToTray}"
                                  IsEnabled="{Binding ShowTrayIcon}"
                                  Foreground="{StaticResource EVEMonTextPrimaryBrush}" />
                    </StackPanel>
                </Border>

                <!-- Notification Settings -->
                <Border Background="{StaticResource EVEMonSecondaryBrush}"
                        CornerRadius="4"
                        Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Notifications"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <CheckBox Content="Play sound on skill completion"
                                  IsChecked="{Binding PlayNotificationSound}"
                                  Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <CheckBox Content="Send desktop notification alerts"
                                  IsChecked="{Binding SendDesktopAlert}"
                                  Foreground="{StaticResource EVEMonTextPrimaryBrush}" />
                    </StackPanel>
                </Border>

                <!-- Proxy Settings -->
                <Border Background="{StaticResource EVEMonSecondaryBrush}"
                        CornerRadius="4"
                        Padding="16">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Network Proxy"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <CheckBox Content="Use proxy server"
                                  IsChecked="{Binding UseProxyServer}"
                                  Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <Grid ColumnDefinitions="*,Auto"
                              IsEnabled="{Binding UseProxyServer}">
                            <TextBox Grid.Column="0"
                                     Text="{Binding ProxyHost}"
                                     Watermark="Proxy host (e.g., proxy.example.com)"
                                     Margin="0,0,8,0" />
                            <NumericUpDown Grid.Column="1"
                                           Value="{Binding ProxyPort}"
                                           Minimum="1"
                                           Maximum="65535"
                                           Width="100"
                                           FormatString="0" />
                        </Grid>

                        <CheckBox Content="Proxy requires authentication"
                                  IsChecked="{Binding ProxyAuthentication}"
                                  IsEnabled="{Binding UseProxyServer}"
                                  Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <TextBox Text="{Binding ProxyUsername}"
                                 Watermark="Username"
                                 IsEnabled="{Binding ProxyAuthentication}" />
                    </StackPanel>
                </Border>

                <!-- About Section -->
                <Border Background="{StaticResource EVEMonSecondaryBrush}"
                        CornerRadius="4"
                        Padding="16">
                    <StackPanel Spacing="8">
                        <TextBlock Text="About EVEMon"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource EVEMonTextPrimaryBrush}" />

                        <TextBlock Text="EVEMon - EVE Character Monitor"
                                   FontSize="13"
                                   Foreground="{StaticResource EVEMonTextSecondaryBrush}" />

                        <TextBlock Text="Cross-platform edition (Avalonia)"
                                   FontSize="11"
                                   Foreground="{StaticResource EVEMonTextMutedColor}" />

                        <TextBlock Text="https://github.com/aliacollins/evemon"
                                   FontSize="11"
                                   Foreground="{StaticResource EVEMonAccentBrush}"
                                   Cursor="Hand" />
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- Buttons -->
        <Border Grid.Row="1"
                Background="{StaticResource EVEMonSecondaryBrush}"
                Padding="16,12">
            <Grid ColumnDefinitions="Auto,*,Auto,Auto">
                <Button Grid.Column="0"
                        Content="Reset to Defaults"
                        Click="OnResetClick"
                        Padding="12,8" />

                <Button Grid.Column="2"
                        Content="Cancel"
                        Click="OnCancelClick"
                        Padding="12,8"
                        Margin="0,0,8,0" />

                <Button Grid.Column="3"
                        Content="Save"
                        Click="OnSaveClick"
                        Classes="accent"
                        Padding="12,8" />
            </Grid>
        </Border>
    </Grid>
</Window>
